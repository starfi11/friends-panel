# friends-panel

一个用于远程管理 Minecraft 服务器运行状态的 FastAPI 后端服务。
 💡 **自助式启动服务器 / 自动关服 / 企业微信群通知 / 阿里云& MCSManager 集成**

## 项目简介

`friends-panel` 是一个为朋友群体打造的 **Minecraft 服务器启动管理平台**。项目部署在一台低配置的 2h2g 云服务器上，支持远程控制另一台高配云服务器（用于运行 Minecraft 服务端），实现：

- ✅ 自助式开服
- ✅ 自动定时关服
- ✅ 云服务器状态监控（基于阿里云 API）
- ✅ Minecraft 实例状态监控（基于 MCSManager API）
- ✅ 所有关键操作实时通过 **企业微信机器人** 推送到微信群

## 系统预览

<img src="https://luweiphoto.oss-cn-wuhan-lr.aliyuncs.com/202508051554469.png" width="1000" />

## 技术栈

- 框架：**FastAPI**
- 云服务接口：**阿里云 SDK**
- MC服务器管理：**MCSManager API**
- 推送机制：**企业微信机器人**
- 认证方式：**邮箱验证码（白名单机制）**
- 状态管理：自定义线程锁与状态状态机机制，保证多用户并发下的一致性和可靠性

## 使用场景

本项目主要为自用，应用场景较为特殊，针对特定朋友群体的服务器使用需求设计。

我有一台高配 MC 服务器，但出于成本考虑，仅在需要时启动（按量计费）。为了减少人为操作、避免“群内艾特管理员开服”的低效流程，同时也考虑到微信机器人在交互方式上的一些限制，最终设计了这个系统，实现 **真正的“朋友自助式开服”体验**。

## 功能一览

| 功能           | 描述                                                         |
| -------------- | ------------------------------------------------------------ |
| ✅ 启动服务器   | 提交验证码 + 时长，即可启动目标 ECS 实例并启动 Minecraft 服务器 |
| ✅ 定时关机     | 自动计时，倒计时结束后关机并推送通知                         |
| ✅ 状态查询     | 实时返回目标 ECS 和 Minecraft 实例的状态                     |
| ✅ 验证码机制   | 所有控制操作需验证邮箱验证码（白名单限制）                   |
| ✅ 群聊通知     | 所有关键事件实时推送至微信群，确保全员同步                   |
| ✅ 接口调用日志 | 后端记录完整日志以供调试与追踪                               |

------

## 示例推送内容（企业微信机器人）

<div style="overflow: auto;">
  <img src="https://luweiphoto.oss-cn-wuhan-lr.aliyuncs.com/202508051607175.jpg" alt="Image 1" style="width: 44.6%; float: left;">
  <img src="https://luweiphoto.oss-cn-wuhan-lr.aliyuncs.com/202508051607409.jpg" alt="Image 2" style="width: 50%; float: left;">
</div>

